import React, { useEffect, useState } from "react";
import axios from "../axios.config";
import { FiUsers } from "react-icons/fi";
import { AiFillDollarCircle } from "react-icons/ai";

const Analytics = () => {
  const [totalStaffCount, setTotalStaffCount] = useState(0);
  const [averageSalary, setAverageSalary] = useState(0);

  useEffect(() => {
    // Fetch data when the component mounts
    fetchData();
  }, []);

  const fetchData = async () => {
    try {
      const response = await axios.get("your-api-endpoint-url");

      // Extract the data from the response
      const { total_staff_count, average_salary } = response.data;

      // Update the state with the fetched data
      setTotalStaffCount(total_staff_count);
      setAverageSalary(average_salary);
    } catch (error) {
      console.log("Error fetching data:", error);
    }
  };

  return (
    <div>
      <div className="bg-gray-50 shadow-md p-6 rounded-lg ml-6">
        <div className="flex flex-row space-x-4 items-center">
          <div id="stats-1">
            <FiUsers size={30} className="text-[#575859]" />
          </div>
          <div>
            <p className="text-indigo-600 text-sm font-medium uppercase leading-4">
              Staff
            </p>
            <p className="text-[#575859] font-bold text-2xl inline-flex items-center space-x-2">
              <span>+{totalStaffCount}</span>
              <span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  strokeWidth="1.5"
                  stroke="currentColor"
                  className="w-6 h-6"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"
                  />
                </svg>
              </span>
            </p>
          </div>
        </div>
      </div>

      <div className="bg-gray-50 shadow-md p-6 rounded-lg mx-4 ">
        <div className="flex flex-row space-x-4 items-center">
          <div id="stats-1">
            <AiFillDollarCircle size={30} className="text-[#575859]" />
          </div>
          <div>
            <p className="text-teal-300 text-sm font-medium uppercase leading-4">
              Average Salary
            </p>
            <p className="text-[#575859] font-bold text-2xl inline-flex items-center space-x-2">
              <span>${averageSalary}</span>
              <span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  strokeWidth="1.5"
                  stroke="currentColor"
                  className="w-6 h-6"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"
                  />
                </svg>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Analytics;
